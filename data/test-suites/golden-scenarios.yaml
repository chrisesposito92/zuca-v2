name: golden-scenarios
version: "1.0"
description: Test cases derived from golden use cases and known scenarios

tests:
  # Introductory Pricing Scenario (the original bug case)
  - id: mint-mobile-intro-pricing
    name: Introductory Pricing - Mint Mobile
    description: |
      Customer has introductory pricing: first 3 months at $15/month,
      then $20/month for remaining 9 months. This should produce
      separate line items in contracts/orders and billings.
    input:
      customer_name: Mint Mobile
      contract_start_date: "01/01/2026"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        Mint Mobile wireless plan:
        - 3 months at $15/month introductory rate
        - 9 months at $20/month standard rate
        - Monthly billing in advance
    focus_steps:
      - contracts_orders
      - billings
      - design_subscription
    tags:
      - introductory-pricing
      - ramp
      - step-up

  # Simple Recurring Subscription
  - id: simple-recurring-12mo
    name: Simple 12-Month Recurring
    description: |
      Basic 12-month SaaS subscription with flat monthly pricing.
      No ramps, no usage, just simple recurring charges.
    input:
      customer_name: Acme Corp
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        Standard SaaS subscription:
        - $100/month for enterprise software
        - Monthly billing in advance
        - 12-month commitment
    focus_steps:
      - contracts_orders
      - billings
    tags:
      - simple
      - recurring

  # Year-over-Year Ramp
  - id: annual-ramp-2year
    name: Annual Ramp - 2 Year Contract
    description: |
      2-year contract with different pricing per year.
      Year 1: $1000/month, Year 2: $1200/month
    input:
      customer_name: TechGiant Inc
      contract_start_date: "01/01/2025"
      terms_months: 24
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        Enterprise platform subscription with annual ramp:
        - Year 1: $1000/month
        - Year 2: $1200/month (20% increase)
        - Monthly billing in advance
    focus_steps:
      - contracts_orders
      - billings
      - design_subscription
      - revrec_waterfall
    tags:
      - ramp
      - multi-year

  # Quarterly Billing
  - id: quarterly-billing-annual
    name: Quarterly Billing - Annual Contract
    description: |
      Annual subscription with quarterly billing cycles.
    input:
      customer_name: Quarterly Corp
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Quarterly
      is_allocations: false
      use_case_description: |
        Professional services subscription:
        - $3000/quarter ($1000/month equivalent)
        - Quarterly billing in advance
        - 12-month term
    focus_steps:
      - billings
    tags:
      - quarterly
      - simple

  # Multi-Element with Allocation
  - id: multi-element-allocation
    name: Multi-Element Arrangement
    description: |
      Bundle with multiple deliverables requiring SSP allocation.
    input:
      customer_name: Bundle Customer
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: true
      allocation_method: Use List Price
      use_case_description: |
        Software bundle with multiple elements:
        - Core Platform: $500/month (list price $600)
        - Premium Support: $100/month (list price $150)
        - Implementation Services: $2000 one-time (list price $2500)
        Total bundle: $8200/year
    focus_steps:
      - design_subscription
      - revrec_waterfall
    tags:
      - allocation
      - multi-element
      - one-time

  # ============================================================================
  # Additional scenarios from Golden Use Cases
  # ============================================================================

  # UC-0012: Prepaid Drawdown (Ratable)
  - id: prepaid-drawdown-ratable
    name: Annual Prepaid with Ratable Release
    description: |
      Annual prepaid credits with ratable (straight-line) revenue recognition.
      Customer pays upfront, revenue recognized evenly over term.
    input:
      customer_name: Prepaid Corp
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Annually
      is_allocations: false
      use_case_description: |
        Annual prepaid cloud credits:
        - $12,000 prepaid annually
        - Credits drawn down as used
        - Revenue recognized ratably over 12 months ($1000/month)
        - Billing upfront at contract start
    focus_steps:
      - contracts_orders
      - billings
      - revrec_waterfall
    tags:
      - prepaid
      - drawdown
      - ratable
      - annual-billing

  # UC-0014: Pay As You Go Usage
  - id: usage-paygo
    name: Pay As You Go Usage
    description: |
      Pure usage-based billing with no commitment.
      Billed in arrears based on actual consumption.
    input:
      customer_name: Usage Customer
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        API consumption service:
        - $0.01 per API call
        - No minimum commitment
        - Billed monthly in arrears
        - Usage-based revenue recognition
    focus_steps:
      - design_subscription
      - billings
    tags:
      - usage
      - paygo
      - consumption
      - arrears

  # UC-0025: Free Months Promotion
  - id: promo-free-months
    name: Subscription with Free Months
    description: |
      Subscription with promotional free period at start.
      First 3 months free (100% discount), then full price.
    input:
      customer_name: Promo Customer
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        SaaS subscription with promotional offer:
        - First 3 months FREE (100% discount)
        - Months 4-12: $100/month
        - Total contract value: $900 over 12 months
        - Revenue recognized over full 12-month term
    focus_steps:
      - contracts_orders
      - billings
      - design_subscription
      - revrec_waterfall
    tags:
      - promotion
      - discount
      - free-months

  # UC-0027: Subscription with Setup Fee
  - id: subscription-setup-fee
    name: Subscription with One-Time Setup Fee
    description: |
      Recurring subscription with upfront implementation fee.
      Setup fee recognized over subscription term.
    input:
      customer_name: Setup Corp
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: true
      allocation_method: Use List Price
      use_case_description: |
        Enterprise software with implementation:
        - One-time setup fee: $5,000 (billed upfront)
        - Monthly subscription: $500/month
        - Setup fee revenue recognized over 12-month term
        - Total contract: $11,000
    focus_steps:
      - contracts_orders
      - billings
      - design_subscription
      - revrec_waterfall
    tags:
      - setup-fee
      - one-time
      - allocation

  # UC-0034: B2C Monthly
  - id: b2c-monthly-simple
    name: B2C Monthly Subscription
    description: |
      Simple B2C consumer subscription with monthly billing.
      Low-dollar, high-volume scenario.
    input:
      customer_name: Consumer User
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        Consumer streaming service:
        - $9.99/month subscription
        - Monthly billing in advance
        - No allocations required
        - Simple recurring revenue recognition
    focus_steps:
      - contracts_orders
      - billings
    tags:
      - b2c
      - consumer
      - simple

  # UC-0035: B2C Annual
  - id: b2c-annual-prepaid
    name: B2C Annual Prepaid Subscription
    description: |
      Annual B2C subscription billed upfront.
      Common for consumer apps with annual discount.
    input:
      customer_name: Annual Consumer
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Annually
      is_allocations: false
      use_case_description: |
        Consumer productivity app (annual plan):
        - $99.99/year (vs $9.99/month = $119.88)
        - Billed annually upfront
        - Revenue recognized ratably over 12 months
    focus_steps:
      - contracts_orders
      - billings
      - revrec_waterfall
    tags:
      - b2c
      - annual
      - prepaid

  # Semi-Annual Billing
  - id: semi-annual-billing
    name: Semi-Annual Billing Cycle
    description: |
      Subscription with semi-annual (every 6 months) billing.
    input:
      customer_name: Semi-Annual Corp
      contract_start_date: "01/01/2025"
      terms_months: 24
      transaction_currency: USD
      billing_period: Semi-Annually
      is_allocations: false
      use_case_description: |
        Enterprise license with semi-annual billing:
        - $6,000 every 6 months
        - 24-month contract term
        - 4 billing periods total
        - Revenue recognized monthly ($1,000/month)
    focus_steps:
      - billings
      - revrec_waterfall
    tags:
      - semi-annual
      - multi-year

  # EUR Currency
  - id: eur-currency-subscription
    name: EUR Currency Subscription
    description: |
      Subscription in EUR currency for European customers.
    input:
      customer_name: European GmbH
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: EUR
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        European SaaS subscription:
        - €500/month for platform access
        - Monthly billing in advance
        - 12-month term
        - All amounts in EUR
    focus_steps:
      - contracts_orders
      - billings
    tags:
      - currency
      - eur
      - international

  # CAD Currency with Allocation
  - id: cad-multi-element
    name: CAD Multi-Element Bundle
    description: |
      Canadian dollar bundle with SSP allocation.
    input:
      customer_name: Canadian Inc
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: CAD
      billing_period: Monthly
      is_allocations: true
      allocation_method: Use Sell Price
      use_case_description: |
        Canadian software bundle:
        - Core software: CAD $800/month
        - Training package: CAD $2,000 one-time
        - Support: CAD $200/month
        - Allocate based on sell prices
    focus_steps:
      - design_subscription
      - revrec_waterfall
    tags:
      - currency
      - cad
      - allocation
      - multi-element

  # ============================================================================
  # RAMP SCENARIOS - Complex Pricing Changes Over Time
  # ============================================================================

  - id: quarterly-ramp-3year
    name: Quarterly Step-Up Ramp - 3 Year
    description: |
      3-year contract with quarterly price increases.
      Tests complex ramp handling over extended period.
    input:
      customer_name: Quarterly Ramp Corp
      contract_start_date: "01/01/2025"
      terms_months: 36
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        Enterprise platform with quarterly ramps:
        - Q1 Year 1: $1,000/month
        - Q2 Year 1: $1,100/month
        - Q3 Year 1: $1,200/month
        - Q4 Year 1: $1,300/month
        - Year 2: 10% increase each quarter continuing pattern
        - Year 3: 10% increase each quarter continuing pattern
        - Monthly billing in advance
    focus_steps:
      - contracts_orders
      - billings
      - design_subscription
      - revrec_waterfall
    tags:
      - ramp
      - quarterly-ramp
      - multi-year
      - complex

  - id: decreasing-ramp
    name: Decreasing Price Ramp (Volume Discount)
    description: |
      Contract where price decreases over time as volume commitment kicks in.
    input:
      customer_name: Volume Discount Inc
      contract_start_date: "01/01/2025"
      terms_months: 24
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        Volume-based decreasing pricing:
        - Year 1: $500/month (base rate)
        - Year 2: $400/month (20% volume discount)
        - Customer commits to 2-year term for discount
        - Monthly billing in advance
    focus_steps:
      - contracts_orders
      - billings
      - revrec_waterfall
    tags:
      - ramp
      - decreasing
      - volume-discount

  - id: mid-term-ramp
    name: Mid-Contract Price Change
    description: |
      Price change happens mid-year, not at annual boundary.
    input:
      customer_name: MidTerm Ramp LLC
      contract_start_date: "03/15/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        Software license with mid-term adjustment:
        - Months 1-6: $800/month
        - Months 7-12: $1,000/month (25% increase)
        - Price change effective September 15, 2025
        - Monthly billing in advance
    focus_steps:
      - contracts_orders
      - billings
      - revrec_waterfall
    tags:
      - ramp
      - mid-term
      - partial-period

  # ============================================================================
  # CONTRACT MODIFICATIONS - Amendments, Upgrades, Renewals
  # ============================================================================

  - id: amendment-upgrade
    name: Mid-Term Upgrade Amendment
    description: |
      Customer upgrades to higher tier mid-contract.
      Tests amendment handling and prorated charges.
    input:
      customer_name: Upgrade Customer
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        SaaS subscription with mid-term upgrade:
        - Original: Basic tier at $100/month (Jan-Jun)
        - Amendment: Upgrade to Pro tier at $200/month (Jul-Dec)
        - Amendment effective July 1, 2025
        - Co-termed to original end date
        - Prorate any billing adjustments
    focus_steps:
      - contracts_orders
      - billings
      - design_subscription
    tags:
      - amendment
      - upgrade
      - co-term

  - id: amendment-downgrade
    name: Mid-Term Downgrade Amendment
    description: |
      Customer downgrades mid-contract with credit handling.
    input:
      customer_name: Downgrade Customer
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        SaaS subscription with mid-term downgrade:
        - Original: Enterprise at $500/month (Jan-Jun)
        - Amendment: Downgrade to Pro at $200/month (Jul-Dec)
        - Amendment effective July 1, 2025
        - Credit issued for prepaid difference
        - Co-termed to original end date
    focus_steps:
      - contracts_orders
      - billings
      - design_subscription
    tags:
      - amendment
      - downgrade
      - credit

  - id: amendment-add-product
    name: Add Product to Existing Contract
    description: |
      Customer adds new product to existing subscription.
    input:
      customer_name: Add Product Corp
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: true
      allocation_method: Use List Price
      use_case_description: |
        Existing subscription with product addition:
        - Original: Core Platform at $300/month (full term)
        - Amendment: Add Analytics Module at $150/month (Jul-Dec)
        - Amendment effective July 1, 2025
        - New product co-termed to original end date
        - Re-allocate revenue for new bundle
    focus_steps:
      - contracts_orders
      - billings
      - design_subscription
      - revrec_waterfall
    tags:
      - amendment
      - add-product
      - allocation
      - co-term

  - id: renewal-price-increase
    name: Renewal with Price Increase
    description: |
      Contract renewal with annual price escalation.
    input:
      customer_name: Renewal Corp
      contract_start_date: "01/01/2026"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        Renewal of existing subscription:
        - Previous term: $1,000/month (2025)
        - Renewal term: $1,050/month (5% increase)
        - 12-month renewal term starting Jan 2026
        - Auto-renewal with 30-day notice
        - Monthly billing in advance
    focus_steps:
      - contracts_orders
      - billings
    tags:
      - renewal
      - price-increase

  - id: early-renewal-extension
    name: Early Renewal with Term Extension
    description: |
      Customer renews early and extends term.
    input:
      customer_name: Early Renew Inc
      contract_start_date: "07/01/2025"
      terms_months: 24
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        Early renewal with term extension:
        - Original end date: December 31, 2025
        - Early renewal: July 1, 2025 (6 months early)
        - New 24-month term at $800/month
        - Credit remaining months from old contract
        - New end date: June 30, 2027
    focus_steps:
      - contracts_orders
      - billings
      - revrec_waterfall
    tags:
      - renewal
      - early-renewal
      - extension

  # ============================================================================
  # BUNDLE EXPLOSIONS - Complex Multi-Element Arrangements
  # ============================================================================

  - id: bundle-5-element
    name: 5-Element Software Bundle
    description: |
      Complex bundle with 5 distinct performance obligations.
    input:
      customer_name: Full Bundle Corp
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: true
      allocation_method: Use List Price
      use_case_description: |
        Enterprise software bundle with 5 elements:
        - Core Platform License: $600/month (list $700)
        - Advanced Analytics: $200/month (list $250)
        - Premium Support: $150/month (list $200)
        - Implementation Services: $10,000 one-time (list $12,000)
        - Training Package: $3,000 one-time (list $4,000)
        - Total bundle price: $24,400/year
        - Allocate based on list prices
    focus_steps:
      - design_subscription
      - contracts_orders
      - revrec_waterfall
    tags:
      - bundle
      - multi-element
      - allocation
      - complex

  - id: bundle-mixed-recognition
    name: Bundle with Mixed Recognition Patterns
    description: |
      Bundle where different elements have different recognition timing.
    input:
      customer_name: Mixed Recognition LLC
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: true
      allocation_method: Use List Price
      use_case_description: |
        Bundle with mixed recognition patterns:
        - SaaS Platform: $500/month, ratable over term
        - Implementation: $8,000 one-time, recognize at completion (Month 2)
        - Training: $2,000 one-time, recognize at delivery (Month 1)
        - Hardware: $3,000 one-time, recognize at shipment (Month 1)
        - Support: $100/month, ratable over term
        - Different POBs satisfy at different times
    focus_steps:
      - design_subscription
      - contracts_orders
      - revrec_waterfall
    tags:
      - bundle
      - mixed-recognition
      - point-in-time
      - over-time

  - id: bundle-with-usage
    name: Bundle with Recurring and Usage Components
    description: |
      Bundle combining fixed recurring fees with usage-based charges.
    input:
      customer_name: Hybrid Bundle Inc
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: true
      allocation_method: Use Sell Price
      use_case_description: |
        Platform bundle with usage:
        - Base Platform: $400/month fixed
        - API Calls: $0.001 per call (est. 500,000/month)
        - Storage: $0.10 per GB (est. 1,000 GB/month)
        - Premium Support: $100/month fixed
        - Usage billed in arrears
        - Fixed fees billed in advance
    focus_steps:
      - design_subscription
      - billings
    tags:
      - bundle
      - usage
      - hybrid
      - arrears

  - id: bundle-tiered-discount
    name: Bundle with Tiered Volume Discount
    description: |
      Bundle price depends on volume tier selected.
    input:
      customer_name: Tiered Bundle Corp
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: true
      allocation_method: Use List Price
      use_case_description: |
        Volume-tiered enterprise bundle:
        - Tier selected: Enterprise (100+ seats)
        - Core Platform: $800/month (Tier 1 would be $1200)
        - Advanced Features: $300/month (Tier 1 would be $450)
        - Support: $200/month (Tier 1 would be $300)
        - 33% discount for volume commitment
        - Allocate pre-discount list prices
    focus_steps:
      - design_subscription
      - contracts_orders
      - revrec_waterfall
    tags:
      - bundle
      - tiered
      - volume-discount
      - allocation

  # ============================================================================
  # ALLOCATION SCENARIOS - Various SSP Methods
  # ============================================================================

  - id: allocation-residual
    name: Residual Allocation Method
    description: |
      Allocation using residual method for one element.
    input:
      customer_name: Residual Alloc Inc
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: true
      allocation_method: Residual
      use_case_description: |
        Bundle with residual allocation:
        - Professional Services: $50,000 one-time (known SSP: $50,000)
        - Software License: residual of transaction price
        - Total contract: $120,000
        - License gets residual: $70,000
        - Use residual method per ASC 606-10-32-35
    focus_steps:
      - design_subscription
      - revrec_waterfall
    tags:
      - allocation
      - residual
      - asc606

  - id: allocation-adjusted-market
    name: Adjusted Market Assessment SSP
    description: |
      SSP determined by adjusted market assessment approach.
    input:
      customer_name: Market SSP Corp
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: true
      allocation_method: Use List Price
      use_case_description: |
        Bundle with market-based SSP:
        - New Product (no history): $300/month, SSP from market research
        - Established Product: $500/month, SSP from historical sales
        - Support: $100/month, SSP from standalone sales
        - Market research shows comparable products at $350/month
        - Adjust allocation accordingly
    focus_steps:
      - design_subscription
      - revrec_waterfall
    tags:
      - allocation
      - market-assessment
      - ssp

  - id: allocation-with-discount
    name: Bundle Discount Allocation
    description: |
      Discount on bundle must be allocated across elements.
    input:
      customer_name: Discount Allocation LLC
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: true
      allocation_method: Use List Price
      use_case_description: |
        Bundle with significant discount:
        - Product A: List $1,000/month, Sell $800/month
        - Product B: List $500/month, Sell $400/month
        - Product C: List $300/month, Sell $250/month
        - Total List: $1,800/month, Total Sell: $1,450/month
        - 19.4% bundle discount to allocate proportionally
        - Each element gets proportional discount
    focus_steps:
      - design_subscription
      - revrec_waterfall
    tags:
      - allocation
      - discount
      - proportional

  # ============================================================================
  # USAGE SCENARIOS - Consumption-Based Billing
  # ============================================================================

  - id: usage-tiered
    name: Tiered Usage Pricing
    description: |
      Usage with tier-based pricing (unit price decreases with volume).
    input:
      customer_name: Tiered Usage Corp
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        API service with tiered pricing:
        - Tier 1 (0-10,000 calls): $0.10 per call
        - Tier 2 (10,001-50,000 calls): $0.08 per call
        - Tier 3 (50,001-100,000 calls): $0.05 per call
        - Tier 4 (100,001+ calls): $0.03 per call
        - Monthly billing in arrears
        - Tiers reset each month
    focus_steps:
      - design_subscription
      - billings
    tags:
      - usage
      - tiered
      - volume-pricing

  - id: usage-overage
    name: Usage with Overage Charges
    description: |
      Base commitment with overage for usage above threshold.
    input:
      customer_name: Overage Corp
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        Platform with committed usage:
        - Base fee: $500/month (includes 10,000 transactions)
        - Overage: $0.10 per transaction above 10,000
        - Unused transactions do not roll over
        - Base billed in advance, overage in arrears
    focus_steps:
      - design_subscription
      - billings
    tags:
      - usage
      - overage
      - commitment

  - id: usage-high-watermark
    name: High Watermark Usage Billing
    description: |
      Billing based on peak usage during period.
    input:
      customer_name: High Watermark Inc
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        Compute platform with high watermark billing:
        - Price: $0.50 per concurrent user
        - Billed on peak concurrent users during month
        - If peak was 200 users, bill 200 × $0.50 = $100
        - Monthly billing in arrears
    focus_steps:
      - design_subscription
      - billings
    tags:
      - usage
      - high-watermark
      - peak-billing

  - id: usage-prepaid-credits
    name: Prepaid Usage Credits
    description: |
      Customer buys credits upfront, draws down with usage.
    input:
      customer_name: Credit Customer
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Annually
      is_allocations: false
      use_case_description: |
        Prepaid credit model:
        - Customer purchases $24,000 in credits upfront
        - Credits consumed at $0.01 per API call
        - 2,400,000 API calls included
        - Revenue recognized as credits consumed
        - Unused credits expire at term end
    focus_steps:
      - design_subscription
      - billings
      - revrec_waterfall
    tags:
      - usage
      - prepaid
      - credits
      - drawdown

  # ============================================================================
  # ONE-TIME CHARGES - Various Types
  # ============================================================================

  - id: onetime-implementation
    name: Implementation Services Only
    description: |
      Pure professional services engagement.
    input:
      customer_name: Impl Only Corp
      contract_start_date: "01/01/2025"
      terms_months: 3
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        Implementation services project:
        - Total project: $75,000
        - Milestone 1 (Month 1): $25,000
        - Milestone 2 (Month 2): $25,000
        - Milestone 3 (Month 3): $25,000
        - Recognize at milestone completion
        - No ongoing subscription
    focus_steps:
      - contracts_orders
      - billings
      - revrec_waterfall
    tags:
      - one-time
      - services
      - milestone

  - id: onetime-hardware
    name: Hardware with Installation
    description: |
      Hardware sale with installation service.
    input:
      customer_name: Hardware Corp
      contract_start_date: "01/01/2025"
      terms_months: 1
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: true
      allocation_method: Use List Price
      use_case_description: |
        Hardware and installation:
        - Server Hardware: $50,000 (list $55,000)
        - Installation Service: $5,000 (list $7,000)
        - Hardware recognized at delivery
        - Installation recognized at completion
        - Single invoice at contract start
    focus_steps:
      - design_subscription
      - contracts_orders
      - revrec_waterfall
    tags:
      - one-time
      - hardware
      - installation
      - allocation

  - id: onetime-license-perpetual
    name: Perpetual License Sale
    description: |
      Perpetual software license (not subscription).
    input:
      customer_name: Perpetual License Inc
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Annually
      is_allocations: true
      allocation_method: Use List Price
      use_case_description: |
        Perpetual license with maintenance:
        - Perpetual License: $100,000 one-time
        - Year 1 Maintenance: $20,000 (20% of license)
        - License recognized at delivery (point in time)
        - Maintenance recognized ratably over 12 months
        - License billed upfront, maintenance quarterly
    focus_steps:
      - design_subscription
      - contracts_orders
      - revrec_waterfall
    tags:
      - one-time
      - perpetual
      - license
      - maintenance

  # ============================================================================
  # EDGE CASES - Unusual Scenarios
  # ============================================================================

  - id: mid-month-start
    name: Mid-Month Contract Start
    description: |
      Contract starts mid-month requiring proration.
    input:
      customer_name: Mid-Month Corp
      contract_start_date: "01/15/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        Subscription starting mid-month:
        - Start date: January 15, 2025
        - Monthly fee: $1,000/month
        - First month prorated: 17 days = ~$548.39
        - Full months February through December
        - Last month: January 1-14, 2026 = ~$451.61
    focus_steps:
      - billings
      - revrec_waterfall
    tags:
      - edge-case
      - proration
      - mid-month

  - id: leap-year
    name: Leap Year Daily Proration
    description: |
      Contract spanning leap year affects daily rates.
    input:
      customer_name: Leap Year Corp
      contract_start_date: "01/01/2024"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        Subscription during leap year (2024):
        - Annual fee: $12,000
        - Daily rate: $12,000 / 366 = $32.79
        - February has 29 days
        - Recognition must account for leap year
    focus_steps:
      - revrec_waterfall
    tags:
      - edge-case
      - leap-year
      - proration

  - id: zero-dollar-line
    name: Zero Dollar Line Item
    description: |
      Bundle includes free element (promotional).
    input:
      customer_name: Free Element Corp
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: true
      allocation_method: Use List Price
      use_case_description: |
        Bundle with free promotional element:
        - Core Platform: $500/month
        - Premium Support: $100/month
        - Analytics Module: FREE (normally $200/month)
        - Free element still needs SSP for allocation
        - Use list price $200 for allocation purposes
    focus_steps:
      - design_subscription
      - contracts_orders
      - revrec_waterfall
    tags:
      - edge-case
      - free
      - zero-dollar
      - allocation

  - id: very-short-term
    name: 1-Month Contract
    description: |
      Very short term subscription.
    input:
      customer_name: Short Term Inc
      contract_start_date: "01/01/2025"
      terms_months: 1
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        Month-to-month subscription:
        - Single month commitment
        - $500 for January 2025
        - Billed and recognized in same month
        - Auto-renews unless cancelled
    focus_steps:
      - contracts_orders
      - billings
    tags:
      - edge-case
      - short-term
      - month-to-month

  - id: multi-year-upfront
    name: 3-Year Upfront Payment
    description: |
      Customer pays entire 3-year contract upfront.
    input:
      customer_name: Upfront Payment Corp
      contract_start_date: "01/01/2025"
      terms_months: 36
      transaction_currency: USD
      billing_period: Upfront
      is_allocations: false
      use_case_description: |
        3-year prepaid subscription:
        - Total contract: $108,000 ($3,000/month equivalent)
        - Single invoice for full amount at start
        - Revenue recognized monthly over 36 months
        - Large deferred revenue balance
    focus_steps:
      - contracts_orders
      - billings
      - revrec_waterfall
    tags:
      - multi-year
      - upfront
      - prepaid
      - deferred-revenue

  # ============================================================================
  # COMPLEX HYBRID SCENARIOS
  # ============================================================================

  - id: hybrid-all-charge-types
    name: All Charge Types Combined
    description: |
      Contract with recurring, one-time, and usage charges.
    input:
      customer_name: Everything Inc
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: true
      allocation_method: Use List Price
      use_case_description: |
        Complete platform deal:
        - Platform License: $1,000/month recurring
        - Implementation: $15,000 one-time (Month 1)
        - Training: $5,000 one-time (Month 2)
        - API Usage: $0.01 per call (est. 100,000/month)
        - Storage: $0.05 per GB (est. 500 GB/month)
        - Premium Support: $200/month recurring
        - Mixed billing: advance for recurring, arrears for usage
    focus_steps:
      - design_subscription
      - contracts_orders
      - billings
      - revrec_waterfall
    tags:
      - hybrid
      - all-types
      - complex
      - allocation

  - id: hybrid-ramp-with-usage
    name: Ramp Subscription with Usage
    description: |
      Ramping base fee plus usage component.
    input:
      customer_name: Ramp Usage Corp
      contract_start_date: "01/01/2025"
      terms_months: 24
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        Platform with ramping base + usage:
        - Year 1 Base: $800/month
        - Year 2 Base: $1,000/month (25% ramp)
        - Usage component: $0.05 per transaction
        - Estimated 50,000 transactions/month
        - Base billed in advance, usage in arrears
    focus_steps:
      - design_subscription
      - billings
      - revrec_waterfall
    tags:
      - hybrid
      - ramp
      - usage

  - id: global-multi-currency
    name: Global Contract Multi-Currency
    description: |
      Contract with different currencies for different regions.
    input:
      customer_name: Global Corp
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: true
      allocation_method: Use List Price
      use_case_description: |
        Global enterprise agreement:
        - US Entity: $50,000/year in USD
        - EU Entity: €40,000/year in EUR
        - APAC Entity: ¥5,000,000/year in JPY
        - Master agreement in USD
        - Local billing in local currency
        - Consolidated reporting in USD
    focus_steps:
      - design_subscription
      - contracts_orders
    tags:
      - multi-currency
      - global
      - enterprise

  - id: commitment-with-true-up
    name: Annual Commitment with Quarterly True-Up
    description: |
      Annual minimum commitment with quarterly usage true-up.
    input:
      customer_name: True-Up Corp
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Quarterly
      is_allocations: false
      use_case_description: |
        Committed contract with true-up:
        - Annual minimum commitment: $120,000
        - Quarterly minimum: $30,000
        - Usage rate: $0.10 per unit
        - If usage < minimum, pay minimum
        - If usage > minimum, pay actual usage
        - Quarterly true-up billing
    focus_steps:
      - design_subscription
      - billings
    tags:
      - commitment
      - true-up
      - minimum
      - usage

  # =============================================================================
  # ZUORA EDGE CASES - Complex Real-World Scenarios
  # =============================================================================

  # --- Ramp Misalignment Scenarios ---

  - id: ramp-misaligned-18month
    name: 18-Month Term with Annual Ramp Steps
    description: |
      Subscription term doesn't align with ramp interval - 18 months with annual price increases.
      Tests proper proration and revenue allocation when ramp periods are cut short.
    input:
      customer_name: Misaligned Ramp Inc
      contract_start_date: "01/01/2025"
      terms_months: 18
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        18-month subscription with annual ramp pricing:
        - Year 1 rate: $1,000/month (months 1-12)
        - Year 2 rate: $1,500/month (months 13-18 only, 6 months)
        - Total contract value: $12,000 + $9,000 = $21,000
        - Rev rec must handle partial Year 2 recognition
        - ASC 606 requires straight-line over 18 months = $1,166.67/month
    focus_steps:
      - contracts_orders
      - billings
      - revrec_waterfall
    tags:
      - ramp
      - misalignment
      - proration
      - asc606

  - id: ramp-quarterly-with-annual-term
    name: Quarterly Ramps in Annual Contract
    description: |
      4 quarterly price increases within a 12-month term.
      Tests fine-grained ramp allocation across many periods.
    input:
      customer_name: Quarterly Ramp Co
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        Annual subscription with quarterly ramp-up:
        - Q1 (Jan-Mar): $500/month = $1,500
        - Q2 (Apr-Jun): $750/month = $2,250
        - Q3 (Jul-Sep): $1,000/month = $3,000
        - Q4 (Oct-Dec): $1,250/month = $3,750
        - Total: $10,500 over 12 months
        - Straight-line rev rec: $875/month
        - Each quarter needs separate contract line
    focus_steps:
      - contracts_orders
      - revrec_waterfall
    tags:
      - ramp
      - quarterly
      - multiple-segments

  # --- SSP and Allocation Edge Cases ---

  - id: ssp-residual-method
    name: Bundle with Indeterminable SSP (Residual Method)
    description: |
      Bundle where one component has no observable SSP, requiring residual allocation method.
    input:
      customer_name: Residual SSP Corp
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Annual
      is_allocations: true
      allocation_method: Residual
      use_case_description: |
        Software bundle with custom development:
        - Platform License: $50,000 (SSP: $60,000)
        - Support: $10,000 (SSP: $12,000)
        - Custom Integration: $40,000 (SSP: Not determinable)
        - Total contract: $100,000

        Residual allocation:
        - Platform gets: $60,000 / $72,000 * ($100,000 - $40,000) = $50,000
        - Support gets: $12,000 / $72,000 * ($100,000 - $40,000) = $10,000
        - Custom gets residual: $40,000

        Recognition:
        - Platform: Ratably over 12 months
        - Support: Ratably over 12 months
        - Custom Integration: Point-in-time on delivery (assume month 3)
    focus_steps:
      - design_subscription
      - contracts_orders
      - revrec_waterfall
    tags:
      - allocation
      - residual
      - ssp
      - custom-development

  - id: ssp-significant-discount
    name: Bundle with Significant Discount Requiring Allocation
    description: |
      Bundle sold at 40% discount - must allocate discount proportionally per ASC 606.
    input:
      customer_name: Deep Discount Inc
      contract_start_date: "01/01/2025"
      terms_months: 24
      transaction_currency: USD
      billing_period: Annual
      is_allocations: true
      allocation_method: Relative SSP
      use_case_description: |
        Enterprise bundle at significant discount:
        - Product A: List $100,000, SSP $100,000
        - Product B: List $50,000, SSP $50,000
        - Product C: List $50,000, SSP $50,000
        - Total SSP: $200,000
        - Contract price: $120,000 (40% discount)

        Proportional allocation of $120,000:
        - Product A: $100k/$200k * $120k = $60,000
        - Product B: $50k/$200k * $120k = $30,000
        - Product C: $50k/$200k * $120k = $30,000

        All products recognized ratably over 24 months.
    focus_steps:
      - design_subscription
      - contracts_orders
      - revrec_waterfall
    tags:
      - allocation
      - discount
      - ssp
      - bundle

  # --- Contract Modification Scenarios ---

  - id: modification-upgrade-extend
    name: Mid-Term Upgrade with Term Extension
    description: |
      Customer upgrades service and extends term mid-contract.
      Tests modification accounting under ASC 606.
    input:
      customer_name: Upgrade Extend LLC
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        Original contract (Jan 1, 2025):
        - Standard Plan: $1,000/month for 12 months
        - Total: $12,000

        Modification (Jul 1, 2025 - month 7):
        - Upgrade to Premium: $1,500/month
        - Extend term by 6 months (new end: Jun 30, 2026)
        - Remaining original: 6 months @ $1,000 = $6,000
        - New commitment: 12 months @ $1,500 = $18,000

        Modification treatment (prospective):
        - Recognize $6,000 already earned (Jan-Jun)
        - New contract: $18,000 over 12 months = $1,500/month
    focus_steps:
      - design_subscription
      - contracts_orders
      - revrec_waterfall
    tags:
      - modification
      - upgrade
      - extension
      - asc606

  - id: modification-partial-termination
    name: Partial Contract Termination
    description: |
      Customer terminates one product line mid-term while keeping others.
      Tests partial termination accounting.
    input:
      customer_name: Partial Term Corp
      contract_start_date: "01/01/2025"
      terms_months: 24
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: true
      allocation_method: Relative SSP
      use_case_description: |
        Original 2-year contract:
        - Product A: $2,000/month ($48,000 total)
        - Product B: $1,000/month ($24,000 total)
        - Total: $72,000

        Termination at month 12:
        - Product B terminated (customer no longer needs)
        - Product A continues for remaining 12 months
        - No termination fee

        Accounting:
        - First 12 months: Recognize per original allocation
        - Product B: Accelerate any remaining deferred revenue
        - Product A: Continue normal recognition
    focus_steps:
      - design_subscription
      - contracts_orders
      - revrec_waterfall
    tags:
      - modification
      - termination
      - partial
      - multi-product

  # --- Usage and Consumption Edge Cases ---

  - id: usage-unbilled-recognition
    name: Usage with Unbilled Revenue Recognition
    description: |
      Usage-based billing in arrears with revenue recognition before invoice.
      Tests unbilled AR and revenue timing.
    input:
      customer_name: Unbilled Usage Inc
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        API usage contract billed in arrears:
        - Base platform fee: $500/month (billed in advance)
        - API calls: $0.001 per call (billed in arrears)

        January activity:
        - Base fee billed Jan 1: $500
        - API calls in January: 2,000,000 calls = $2,000
        - Usage invoice generated Feb 1

        Rev rec timing:
        - Base fee: Recognize in January
        - Usage: Recognize in January (when consumed)
        - Creates unbilled AR of $2,000 on Jan 31
        - Invoice clears unbilled AR on Feb 1
    focus_steps:
      - design_subscription
      - billings
      - revrec_waterfall
    tags:
      - usage
      - unbilled
      - arrears
      - api

  - id: usage-tiered-rollover
    name: Tiered Usage with Unused Rollover
    description: |
      Tiered usage pricing where unused units roll over to next period.
    input:
      customer_name: Rollover Usage Co
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        Monthly usage commitment with rollover:
        - Committed: 10,000 units/month @ $0.10 = $1,000/month
        - Overage: $0.15 per unit above commitment
        - Unused units roll over (max 2 months accumulation)

        Q1 Activity:
        - January: Used 8,000 units, 2,000 rollover
        - February: Used 9,000 units (from 10k + 2k pool), 3,000 rollover
        - March: Used 15,000 units (from 10k + 3k pool), 2,000 overage

        March billing:
        - Base commitment: $1,000
        - Overage (2,000 units): $300
        - Total: $1,300

        Rev rec: $1,000 base per month, overage when incurred
    focus_steps:
      - design_subscription
      - billings
    tags:
      - usage
      - tiered
      - rollover
      - overage

  # --- Prepaid and Drawdown Scenarios ---

  - id: prepaid-expiring-balance
    name: Prepaid Credits with Expiration
    description: |
      Prepaid credit purchase with time-based expiration.
      Tests deferred revenue and breakage recognition.
    input:
      customer_name: Expiring Credits LLC
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Annual
      is_allocations: false
      use_case_description: |
        Prepaid credit purchase:
        - Credits purchased: $120,000
        - Credit value: 1,200,000 units ($0.10 each)
        - Expiration: 12 months from purchase
        - Historical usage pattern: 85% utilization

        Expected consumption:
        - Monthly average: 85,000 units ($8,500)
        - Total expected usage: 1,020,000 units ($102,000)
        - Expected breakage: 180,000 units ($18,000)

        Rev rec (ASC 606 breakage):
        - Recognize proportionally with redemption
        - Monthly recognition: ~$10,000 (usage + proportional breakage)
        - If breakage estimate changes, catch-up adjustment
    focus_steps:
      - design_subscription
      - billings
      - revrec_waterfall
    tags:
      - prepaid
      - credits
      - expiration
      - breakage

  - id: prepaid-drawdown-overage
    name: Prepaid Drawdown with Overage Charges
    description: |
      Prepaid commitment that converts to overage when exhausted.
    input:
      customer_name: Drawdown Overage Inc
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        Annual prepaid with overage:
        - Prepaid commitment: $60,000 (paid upfront)
        - Drawdown rate: $5,000/month equivalent
        - Overage rate: $6,000/month (120% of prepaid rate)

        Consumption pattern:
        - Months 1-8: $5,000/month (on track)
        - Month 9-10: $8,000/month (heavy usage)
        - Prepaid exhausted mid-month 10
        - Months 10-12: Overage billing

        Rev rec:
        - Prepaid: Recognize as consumed ($40k in 8mo, then accelerate)
        - Overage: Recognize when incurred
    focus_steps:
      - design_subscription
      - billings
      - revrec_waterfall
    tags:
      - prepaid
      - drawdown
      - overage
      - consumption

  # --- Evergreen and Renewal Edge Cases ---

  - id: evergreen-mid-month-cancel
    name: Evergreen Subscription Mid-Month Cancellation
    description: |
      Month-to-month subscription cancelled mid-billing period.
      Tests proration and final billing.
    input:
      customer_name: Mid-Month Cancel Co
      contract_start_date: "01/15/2025"
      terms_months: 0
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        Evergreen monthly subscription:
        - Start date: January 15, 2025
        - Monthly fee: $3,000
        - Billing: 15th of each month
        - Cancellation notice: March 20, 2025
        - Effective end: March 31, 2025 (end of notice period)

        Billing sequence:
        - Jan 15: $1,500 (prorated Jan 15-31)
        - Feb 15: $3,000 (full month)
        - Mar 15: $3,000 (full month - no proration on cancel)
        - OR: Credit $1,500 for unused Mar 20-Apr 14

        Rev rec: Recognize as service delivered
    focus_steps:
      - design_subscription
      - billings
    tags:
      - evergreen
      - cancellation
      - proration
      - mid-month

  - id: evergreen-to-termed-conversion
    name: Evergreen to Termed Conversion
    description: |
      Converting month-to-month customer to annual commitment with discount.
    input:
      customer_name: Convert to Annual LLC
      contract_start_date: "01/01/2024"
      terms_months: 12
      transaction_currency: USD
      billing_period: Annual
      is_allocations: false
      use_case_description: |
        Existing evergreen customer converting to annual:

        Previous (evergreen):
        - Monthly rate: $1,000/month
        - Customer since: Jan 1, 2024
        - Total paid in 2024: $12,000

        New annual contract (Jan 1, 2025):
        - Annual commitment: $10,000 (17% discount)
        - Billed annually in advance
        - Auto-renewal with 30-day notice

        Conversion handling:
        - No overlap in billing periods
        - Close evergreen, open termed
        - Rev rec: Straight-line $833.33/month
    focus_steps:
      - design_subscription
      - billings
      - revrec_waterfall
    tags:
      - evergreen
      - conversion
      - annual
      - discount

  # --- Multi-Element Complex Scenarios ---

  - id: multi-element-mixed-timing
    name: Multi-Element with Different Delivery Timing
    description: |
      Bundle where components are delivered at different times with different recognition patterns.
    input:
      customer_name: Mixed Delivery Corp
      contract_start_date: "01/01/2025"
      terms_months: 24
      transaction_currency: USD
      billing_period: Annual
      is_allocations: true
      allocation_method: Relative SSP
      use_case_description: |
        Enterprise implementation bundle:
        - Software License: $100,000 (SSP: $120,000) - Delivered day 1, recognize over 24mo
        - Implementation: $50,000 (SSP: $60,000) - Delivered month 1-3, POC at go-live
        - Training: $20,000 (SSP: $25,000) - Delivered month 2, POC at delivery
        - Support: $30,000 (SSP: $35,000) - Over 24 months, ratably
        - Total: $200,000, Total SSP: $240,000

        Allocation ($200,000):
        - Software: $120k/$240k * $200k = $100,000
        - Implementation: $60k/$240k * $200k = $50,000
        - Training: $25k/$240k * $200k = $20,833
        - Support: $35k/$240k * $200k = $29,167

        Recognition timing:
        - Software: $4,167/month over 24 months
        - Implementation: $50,000 at go-live (month 3)
        - Training: $20,833 at delivery (month 2)
        - Support: $1,215/month over 24 months
    focus_steps:
      - design_subscription
      - contracts_orders
      - revrec_waterfall
    tags:
      - multi-element
      - mixed-recognition
      - implementation
      - training

  - id: multi-element-variable-consideration
    name: Multi-Element with Variable Consideration
    description: |
      Contract with performance bonuses and usage components alongside fixed fees.
    input:
      customer_name: Variable Consider Inc
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: true
      allocation_method: Relative SSP
      use_case_description: |
        Managed services with performance incentives:
        - Base Platform: $5,000/month fixed ($60,000/year)
        - Managed Services: $3,000/month fixed ($36,000/year)
        - Performance Bonus: Up to $24,000/year based on SLA
          - 99.9% uptime: $2,000/month bonus
          - 99.5% uptime: $1,000/month bonus
          - Below 99.5%: No bonus
        - Usage: $0.10/transaction (estimated 100k/month = $10k/month)

        Variable consideration estimate:
        - Historical SLA: 99.7% average
        - Expected bonus: $1,500/month ($18,000/year)
        - Expected usage: $120,000/year

        Total estimated: $234,000

        Rev rec:
        - Fixed fees: Recognize ratably
        - Bonus: Constrain estimate, recognize when probable
        - Usage: Recognize when earned
    focus_steps:
      - design_subscription
      - contracts_orders
      - revrec_waterfall
    tags:
      - variable-consideration
      - performance-bonus
      - sla
      - usage

  # --- Complex Billing Scenarios ---

  - id: billing-anniversary-vs-calendar
    name: Anniversary Billing vs Calendar Month
    description: |
      Subscription starting mid-month with anniversary billing.
      Tests billing date alignment and proration.
    input:
      customer_name: Anniversary Bill LLC
      contract_start_date: "01/15/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        Mid-month start with anniversary billing:
        - Start: January 15, 2025
        - Monthly fee: $3,000
        - Billing anchor: 15th of each month (anniversary)
        - End: January 14, 2026

        Billing schedule:
        - Jan 15: $3,000 (Jan 15 - Feb 14)
        - Feb 15: $3,000 (Feb 15 - Mar 14)
        - ... continues on 15th
        - Jan 15, 2026: Renewal or final bill

        Rev rec alignment:
        - Each billing period spans calendar months
        - January rev rec: $1,500 (Jan 15-31)
        - February rev rec: $3,000 (Feb 1-28)
        - December rev rec: $1,500 (Dec 1-14) + $1,500 (Dec 15-31)
    focus_steps:
      - billings
      - revrec_waterfall
    tags:
      - anniversary
      - billing-date
      - mid-month
      - proration

  - id: billing-advance-arrears-mix
    name: Mixed Advance and Arrears Billing
    description: |
      Single contract with some components billed in advance, others in arrears.
    input:
      customer_name: Mixed Billing Corp
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        Platform with mixed billing timing:
        - Platform License: $2,000/month (billed in advance on 1st)
        - Support: $500/month (billed in advance on 1st)
        - Professional Services: $150/hour (billed in arrears)
        - API Usage: $0.01/call (billed in arrears)

        January billing:
        - Jan 1: $2,500 (platform + support for January)
        - Feb 1: $2,500 (platform + support for February)
                 + PS hours from January + API from January

        Cash vs revenue timing:
        - Advance items: Cash before revenue
        - Arrears items: Revenue before cash
        - Creates deferred revenue and unbilled AR
    focus_steps:
      - design_subscription
      - billings
    tags:
      - advance
      - arrears
      - mixed-billing
      - timing

  # --- Edge Cases and Corner Cases ---

  - id: edge-negative-invoice
    name: Credit Exceeding Invoice (Negative Balance)
    description: |
      Credit memo application resulting in negative invoice.
    input:
      customer_name: Negative Invoice Inc
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        Subscription with service credit:
        - Monthly fee: $1,000
        - SLA violation credit issued: $1,500

        February billing:
        - Regular invoice: $1,000
        - Credit memo applied: -$1,500
        - Net amount: -$500 (credit balance)

        Options:
        1. Carry credit forward to March
        2. Issue refund for $500
        3. Apply to outstanding AR

        Rev rec impact:
        - Credit reduces recognized revenue
        - May require adjustment to prior period
    focus_steps:
      - billings
      - revrec_waterfall
    tags:
      - credit-memo
      - negative
      - sla-credit
      - adjustment

  - id: edge-backdated-start
    name: Backdated Contract Start
    description: |
      Contract signed with effective date in the past.
      Tests catch-up billing and revenue recognition.
    input:
      customer_name: Backdated Start Co
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: USD
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        Contract execution vs effective date:
        - Contract signed: March 15, 2025
        - Effective start: January 1, 2025 (backdated)
        - Monthly fee: $2,000
        - Customer was using service since Jan 1

        Catch-up billing on Mar 15:
        - January: $2,000
        - February: $2,000
        - March (1-15): $1,000 prorated
        - Total catch-up: $5,000
        - Then regular billing resumes

        Rev rec:
        - Recognize $2,000/month starting January
        - Creates unbilled AR until catch-up invoice
    focus_steps:
      - billings
      - revrec_waterfall
    tags:
      - backdated
      - catch-up
      - unbilled
      - effective-date

  - id: edge-currency-conversion
    name: Multi-Currency with FX Conversion
    description: |
      Contract in one currency, billing in another with FX conversion.
    input:
      customer_name: FX Conversion Ltd
      contract_start_date: "01/01/2025"
      terms_months: 12
      transaction_currency: EUR
      billing_period: Monthly
      is_allocations: false
      use_case_description: |
        Cross-currency contract:
        - Contract currency: EUR
        - Contract value: €120,000 annual (€10,000/month)
        - Billing currency: USD
        - FX rate at contract: 1 EUR = 1.10 USD
        - Monthly billing: $11,000 at contract rate

        FX scenarios:
        - If EUR strengthens: Customer pays more USD
        - If EUR weakens: Customer pays less USD
        - Revenue recognized in EUR (functional currency)

        Accounting:
        - Invoice in USD based on spot rate
        - Revenue in EUR at historical rate
        - FX gain/loss on receivable
    focus_steps:
      - design_subscription
      - billings
      - revrec_waterfall
    tags:
      - multi-currency
      - fx
      - conversion
      - functional-currency
